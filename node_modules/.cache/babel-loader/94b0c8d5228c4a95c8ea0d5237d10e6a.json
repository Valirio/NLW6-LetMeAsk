{"ast":null,"code":"import _regeneratorRuntime from\"/home/braatz/Desktop/www/rocketeseat/nlw6ToGether/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/braatz/Desktop/www/rocketeseat/nlw6ToGether/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/braatz/Desktop/www/rocketeseat/nlw6ToGether/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{Link,useHistory}from'react-router-dom';import{useAuth}from'../hooks/useAuth';import IllustrationImg from\"../assets/images/illustration.svg\";import LogoImg from\"../assets/images/logo.svg\";import{Button}from'../components/Button';import{database}from'../services/firebase';import'../styles/auth.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function NewRoom(){var _useAuth=useAuth(),session=_useAuth.session;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),newRoom=_useState2[0],setNewRoom=_useState2[1];var history=useHistory();function handleCreateRoom(_x){return _handleCreateRoom.apply(this,arguments);}function _handleCreateRoom(){_handleCreateRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var roomRef,firebaseRom;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(newRoom.trim()==='')){_context.next=3;break;}return _context.abrupt(\"return\");case 3:roomRef=database.ref('rooms');_context.next=6;return roomRef.push({title:newRoom,authorId:session===null||session===void 0?void 0:session.id});case 6:firebaseRom=_context.sent;history.push(\"/rooms/\".concat(firebaseRom.key));case 8:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateRoom.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-auth\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(\"img\",{src:IllustrationImg,alt:\"Ilustra\\xE7\\xE3o simbolizando perguntas e respostas\"}),/*#__PURE__*/_jsx(\"strong\",{children:\"Crie salar de Q&A ao-vivo\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Tire duvidas da sua sala em tempo real\"})]}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(\"img\",{src:LogoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Criar uma nova sala\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleCreateRoom,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Digite o C\\xF3digo da sala\",onChange:function onChange(event){return setNewRoom(event.target.value);}}),/*#__PURE__*/_jsx(Button,{type:\"submit\",children:\"Criar Sala\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"quer entrar em uma sala existente? \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Clique aqui!\"})]})]})})]});}","map":{"version":3,"sources":["/home/braatz/Desktop/www/rocketeseat/nlw6ToGether/letmeask/src/pages/NewRoom.tsx"],"names":["useState","Link","useHistory","useAuth","Button","database","NewRoom","session","newRoom","setNewRoom","history","handleCreateRoom","event","preventDefault","trim","roomRef","ref","push","title","authorId","id","firebaseRom","key","IllustrationImg","LogoImg","target","value"],"mappings":"ghBAAA,OAASA,QAAT,KAAoC,OAApC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,OAAT,KAAwB,kBAAxB,C,8GAKA,OAASC,MAAT,KAAuB,sBAAvB,CACA,OAASC,QAAT,KAAyB,sBAAzB,CAKA,MAAO,qBAAP,C,wFAGA,MAAO,SAASC,CAAAA,OAAT,EAAkB,cAEDH,OAAO,EAFN,CAEbI,OAFa,UAEbA,OAFa,eAGSP,QAAQ,CAAC,EAAD,CAHjB,wCAGdQ,OAHc,eAGLC,UAHK,eAIrB,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAJqB,QAMNS,CAAAA,gBANM,4JAMrB,iBAAgCC,KAAhC,0IACIA,KAAK,CAACC,cAAN,GADJ,KAGOL,OAAO,CAACM,IAAR,KAAmB,EAH1B,kEAOUC,OAPV,CAOoBV,QAAQ,CAACW,GAAT,CAAa,OAAb,CAPpB,uBAS8BD,CAAAA,OAAO,CAACE,IAAR,CAAa,CACnCC,KAAK,CAAEV,OAD4B,CAEnCW,QAAQ,CAAEZ,OAAF,SAAEA,OAAF,iBAAEA,OAAO,CAAEa,EAFgB,CAAb,CAT9B,QASUC,WATV,eAcIX,OAAO,CAACO,IAAR,kBAAuBI,WAAW,CAACC,GAAnC,GAdJ,sDANqB,mDAuBrB,mBACI,aAAK,EAAE,CAAC,WAAR,wBACI,sCACI,YAAK,GAAG,CAAEC,eAAV,CAA2B,GAAG,CAAC,qDAA/B,EADJ,cAEI,qDAFJ,cAGI,6DAHJ,GADJ,cAMI,mCACI,aAAK,SAAS,CAAC,cAAf,wBACI,YAAK,GAAG,CAAEC,OAAV,CAAmB,GAAG,CAAC,UAAvB,EADJ,cAEI,2CAFJ,cAGI,cAAM,QAAQ,CAAEb,gBAAhB,wBACI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,4BAFhB,CAGI,QAAQ,CAAE,kBAAAC,KAAK,QAAIH,CAAAA,UAAU,CAACG,KAAK,CAACa,MAAN,CAAaC,KAAd,CAAd,EAHnB,EADJ,cAMI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,wBANJ,GAHJ,cAaI,wEACuC,KAAC,IAAD,EAAM,EAAE,CAAC,GAAT,0BADvC,GAbJ,GADJ,EANJ,GADJ,CA4BH","sourcesContent":["import { useState, FormEvent } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { useAuth } from '../hooks/useAuth'\n\n\nimport IllustrationImg from '../assets/images/illustration.svg'\nimport LogoImg from '../assets/images/logo.svg'\nimport { Button } from '../components/Button'\nimport { database } from '../services/firebase'\n\n\n\n\nimport '../styles/auth.scss'\n\n\nexport function NewRoom(){\n    \n    const { session } = useAuth()\n    const [newRoom, setNewRoom] = useState('')\n    const history = useHistory();\n\n    async function handleCreateRoom(event: FormEvent){\n        event.preventDefault()\n\n        if(newRoom.trim() === ''){\n            return;\n        }\n\n        const roomRef = database.ref('rooms');\n\n        const firebaseRom = await roomRef.push({\n            title: newRoom,\n            authorId: session?.id,\n        })\n\n        history.push(`/rooms/${firebaseRom.key}`)\n    }\n\n    return(\n        <div id=\"page-auth\">\n            <aside>            \n                <img src={IllustrationImg} alt=\"Ilustração simbolizando perguntas e respostas\" />\n                <strong>Crie salar de Q&A ao-vivo</strong>\n                <p>Tire duvidas da sua sala em tempo real</p>\n            </aside>\n            <main>\n                <div className=\"main-content\">\n                    <img src={LogoImg} alt=\"Letmeask\" />\n                    <h2>Criar uma nova sala</h2>\n                    <form onSubmit={handleCreateRoom}>\n                        <input\n                            type=\"text\"\n                            placeholder=\"Digite o Código da sala\"\n                            onChange={event => setNewRoom(event.target.value)}\n                        />\n                        <Button type=\"submit\">\n                            Criar Sala\n                        </Button>\n                    </form>\n                    <p>\n                        quer entrar em uma sala existente? <Link to=\"/\">Clique aqui!</Link>\n                    </p>\n                </div>\n            </main>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}